[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "RSV Trenders",
    "section": "",
    "text": "data = {\n  const co2data = await FileAttachment('https://raw.githubusercontent.com/wf-id/rsv-tracker/main/output/rsv_all_combined_latest.csv')\n    .csv({ typed: true });\n  return co2data.map(d => { \n    d[\"Label\"] = d[\"state\"] + ' ' + d[\"percent_positive\"];\n    return d; \n  });\n}\n\n\n\n\n\n\nSelect the desired dates:\n\nstates_to_select = data.map(d => d.state)\n\n\n\n\n\n\n\nstates_to_select_use = {\n    if(states_to_select == null){\n        return [\"NC\"]\n    } else {\n        return states_to_select\n    }\n}\n\n\n\n\n\n\n\nviewof islands = Inputs.select(data.map(d => d.state), {\n  multiple: true, \n  label: \"State\", \n  initialValue: \"NC\",\n  sort: true, \n  unique: true})\n  \n //islands\n\n\n\n\n\n\n\nviewof start = Inputs.date({label: \"Start date\", value: \"2022-01-02\"})\n\n\n\n\n\n\n\n//#| eval: true\nPlot.plot({\n  y: {\n    grid: true,\n    label: \"RSV PCR Positivity\"\n  },\n  marks: [\n    Plot.line(filtered2, {\n    x: \"week\", \n    y: \"percent_positive\", \n    stroke: \"state\"}),\n    Plot.text(filtered2, Plot.selectLast({\n    x: \"week\",\n    y: \"percent_positive\",\n    z: \"state\",\n    text: \"state\",\n    textAnchor: \"CasesCumulativeCNT\",\n    })\n    ),\n  ]\n});\n\n\n\n\n\n\n\n//#| eval: true\nPlot.plot({\n  y: {\n    grid: true,\n    label: \"RSV PCR Positivity Yearly Comparisons\"\n  },\n  x: {\n    label: \"Week Number\"\n  },\n  marks: [\n    Plot.line(filtered, {\n    x: \"epi_week\", \n    y: \"percent_positive\", \n    stroke: \"epi_year\"}),\n    Plot.text(filtered, Plot.selectLast({\n    x: \"epi_week\",\n    y: \"percent_positive\",\n    z: \"epi_year\",\n    text: \"epi_year\",\n    textAnchor: \"CasesCumulativeCNT\",\n    })\n    ),\n  ]\n});\n\n\n\n\n\n\n\nfiltered = data.filter(function(data) {\n  return islands.includes(data.state);\n});\n\n\n\n\n\n\n\nfiltered2 = filtered.filter(d => d.week >= start);\n\n\n\n\n\n\n\nInputs.table(filtered2)"
  }
]